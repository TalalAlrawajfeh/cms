package initializers;

import org.springframework.beans.factory.annotation.Autowired;

import entities.UserEntity;
import persistence.UserRepository;
import utils.HashUtil;

public class FirstTimeAdminCreator {
	@Autowired
	private UserRepository userRepository;

	public void createAdminIfNotExists() {
		UserEntity user = userRepository.findByUsername("admin");
		UserEntity userEntity = new UserEntity();
		userEntity.setEnabled(true);
		userEntity.setFullName("admin");
		userEntity.setUsername("user");
		userEntity.setPasswordHashCode(HashUtil.hashString("P@ssw0rd"));
		userRepository.save(userEntity);
	}
}
